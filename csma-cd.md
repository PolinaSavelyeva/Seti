---
description: >-
  Carrier-sense multiple access with collision detection — множественный доступ
  с прослушиванием несущей частоты и обнаружением коллизий. Протоколы передачи
  данных первых Ethernet.
---

# CSMA/CD

## Описание алгоритма

Блок данных, который передается по Ethernet на канальном уровне, называется кадром (frame).

<figure><img src=".gitbook/assets/image (37).png" alt=""><figcaption></figcaption></figure>

Станция отправившая сигнал прослушивает напряжение на линии, если напряжение отлично от того, что должно быть оправленно станцией, она останавливает передачу и отправляет JAM сигнал о коллизии. Кусочек данный (frame), чья передача была прервана сохраняется в буффере станции для повторной отправки. Далее на всех станциях, неудачно отправивших сигнал, включается таймер на случайное количество времени из промежутка, после которого можно заново прослушать несущую и совершить отправку. Если таймеры совпали (опять произошла коллизия) временной промежуток, из которого выбирается случайное число, увеличивается вдвое. Если таймеры снова совпали, то в 4 раза, в 8 и так до 16-ти попыток (в реальности после пятой попытки интервал перестает увеличиваться, чтобы не делать ожидание слишком уж большим). Если 16-ая попытка не удалась, то frame считается неудачно отправленным и отбрасывается.



## Проблема маленького фрейма

Если две станции хотят отправить два небольших фрейма, то первая станция, отправив весь фрейм и не услышав посторонних сигналов на линии, посчитает фрейм отправленным успешно и удалит его из буффера. Но коллизия произошла. И даже если коллизию задетектирует станция посередине двух искомых (следовательно, эта станция также должна отправить фрейм или **станция услышала JAM сигнал от другой станции (т.е. усилила коллизию) и передает его дальше с усилением**) и отправит JAM сигнал, он будет распознан отправляющей станцией как коллизия в уже другом, новоотправленном фрейме.&#x20;



## Ограничения на размер фрейма

В стандарте Ethernet есть ограничения на максимальный (защита от монополизации несущей частоты) **1500 байт  (MTU Ethernet'a)** и минимальный (по причине выше) **64 байта** размер передаваемого фрейма.

Однако минимального размера может быть недостаточно, если станция находится в конце длинного сегмента. Для избежания такого рода проблем в том числе используют правило 5-4-3. Также репиторы вносят задержку на обработку сигнала.
